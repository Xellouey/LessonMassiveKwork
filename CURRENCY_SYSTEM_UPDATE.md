# –°–∏—Å—Ç–µ–º–∞ –¶–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è: –ü–µ—Ä–µ—Ö–æ–¥ —Å Telegram Stars –Ω–∞ USD

## üéØ –ü—Ä–æ–±–ª–µ–º–∞ –∏ –†–µ—à–µ–Ω–∏–µ

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –ø–æ–Ω–∏–º–∞–ª–∏ —Å—Ç–æ–∏–º–æ—Å—Ç—å —É—Ä–æ–∫–æ–≤, –∫–æ–≥–¥–∞ —Ü–µ–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å –≤ Telegram Stars (–Ω–∞–ø—Ä–∏–º–µ—Ä, "1923 –∑–≤–µ–∑–¥—ã"), —á—Ç–æ —Å–æ–∑–¥–∞–≤–∞–ª–æ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –±–∞—Ä—å–µ—Ä –∏ —Å–Ω–∏–∂–∞–ª–æ –∫–æ–Ω–≤–µ—Ä—Å–∏—é.

**–†–µ—à–µ–Ω–∏–µ**: –¶–µ–Ω—ã —Ç–µ–ø–µ—Ä—å –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –ø–æ–Ω—è—Ç–Ω—ã—Ö –¥–æ–ª–ª–∞—Ä–∞—Ö –°–®–ê (–Ω–∞–ø—Ä–∏–º–µ—Ä, "$25"), –Ω–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –æ–ø–ª–∞—Ç–∞ –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ Telegram Stars —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–µ–π.

## üîß –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ò–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –ù–æ–≤—ã–π –°–µ—Ä–≤–∏—Å –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –í–∞–ª—é—Ç
**–§–∞–π–ª**: `services/currency.py`

**–§—É–Ω–∫—Ü–∏–∏:**
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è USD ‚Üî Telegram Stars
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–Ω –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ü–µ–Ω –º–µ–∂–¥—É –≤–∞–ª—é—Ç–∞–º–∏

**–ö—É—Ä—Å**: 1 Telegram Star = $0.013

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –ú–æ–¥–µ–ª—å –ë–∞–∑—ã –î–∞–Ω–Ω—ã—Ö
**–§–∞–π–ª**: `database/models.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `price_usd` –≤ –º–æ–¥–µ–ª—å `Lesson`
- –û–±–Ω–æ–≤–ª–µ–Ω `__repr__` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ü–µ–Ω –≤ USD

### 3. –ú–∏–≥—Ä–∞—Ü–∏—è –ë–∞–∑—ã –î–∞–Ω–Ω—ã—Ö
**–§–∞–π–ª**: `database/migrations/versions/8c4f081b5df6_add_price_usd_field.py`

**–î–µ–π—Å—Ç–≤–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–ª–æ–Ω–∫–∏ `price_usd` –≤ —Ç–∞–±–ª–∏—Ü—É `lessons`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ü–µ–Ω –∏–∑ Stars –≤ USD
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ USD —Ü–µ–Ω –¥–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö —É—Ä–æ–∫–æ–≤ –≤ 0

### 4. –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

#### –ö–∞—Ç–∞–ª–æ–≥ –£—Ä–æ–∫–æ–≤ (`handlers/user/catalog.py`)
- –¶–µ–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ "$25" –≤–º–µ—Å—Ç–æ "1923 –∑–≤–µ–∑–¥"

#### –î–µ—Ç–∞–ª–∏ –£—Ä–æ–∫–∞ (`handlers/user/lesson_detail.py`)
- –¶–µ–Ω–∞ —É—Ä–æ–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ –¥–æ–ª–ª–∞—Ä–∞—Ö
- –ö–Ω–æ–ø–∫–∞ –ø–æ–∫—É–ø–∫–∏ —Å–æ–¥–µ—Ä–∂–∏—Ç USD —Ü–µ–Ω—É

#### –°–∏—Å—Ç–µ–º–∞ –û–ø–ª–∞—Ç—ã (`handlers/user/payment.py`)
**–ù–æ–≤—ã–π Flow:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —É—Ä–æ–∫ –∑–∞ "$25"
2. –ù–∞–∂–∏–º–∞–µ—Ç "–ö—É–ø–∏—Ç—å –∑–∞ $25"
3. –ü–æ—è–≤–ª—è–µ—Ç—Å—è –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã
4. –í—ã–±–∏—Ä–∞–µ—Ç "Telegram Stars"
5. Telegram –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç $25 –≤ –Ω—É–∂–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–≤–µ–∑–¥
6. –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –∑–≤–µ–∑–¥–∞—Ö

### 5. –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π PaymentService
**–§–∞–π–ª**: `services/payment.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è USD —Ü–µ–Ω –≤ –∏–Ω–≤–æ–π—Å–∞—Ö
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π —Å —É–∫–∞–∑–∞–Ω–∏–µ–º USD —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–∞

## üé® –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –û–ø—ã—Ç

### –î–æ –ò–∑–º–µ–Ω–µ–Ω–∏–π:
```
üìö –£—Ä–æ–∫: "–û—Å–Ω–æ–≤—ã Python"
üí∞ –¶–µ–Ω–∞: ‚≠ê 1923 –∑–≤–µ–∑–¥
[–ö—É–ø–∏—Ç—å –∑–∞ ‚≠ê 1923 –∑–≤–µ–∑–¥]
```

### –ü–æ—Å–ª–µ –ò–∑–º–µ–Ω–µ–Ω–∏–π:
```
üìö –£—Ä–æ–∫: "–û—Å–Ω–æ–≤—ã Python"  
üí∞ –¶–µ–Ω–∞: $25
[–ö—É–ø–∏—Ç—å –∑–∞ $25]

‚Üì (–∫–ª–∏–∫ –Ω–∞ –∫–Ω–æ–ø–∫—É)

üîÑ –í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã:
[‚≠ê Telegram Stars]

‚Üì (–∫–ª–∏–∫ –Ω–∞ Telegram Stars)

üí≥ –ò–Ω–≤–æ–π—Å —Å–æ–∑–¥–∞–Ω
–¶–µ–Ω–∞: $25
–ö –æ–ø–ª–∞—Ç–µ: 1923 Telegram Stars

Telegram –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç $25 –≤ 1923 –∑–≤–µ–∑–¥
```

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

1. **–£–ª—É—á—à–µ–Ω–∏–µ –ö–æ–Ω–≤–µ—Ä—Å–∏–∏**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ª—É—á—à–µ –ø–æ–Ω–∏–º–∞—é—Ç —Å—Ç–æ–∏–º–æ—Å—Ç—å
2. **–°–Ω–∏–∂–µ–Ω–∏–µ –ë–∞—Ä—å–µ—Ä–æ–≤**: –ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å—á–∏—Ç–∞—Ç—å –∫—É—Ä—Å –∑–≤–µ–∑–¥
3. **–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π –ü–æ–¥—Ö–æ–¥**: –î–æ–ª–ª–∞—Ä—ã –ø–æ–Ω—è—Ç–Ω—ã –≥–ª–æ–±–∞–ª—å–Ω–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏
4. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –ü—Ä–æ—Å—Ç–æ—Ç—ã**: –û–ø–ª–∞—Ç–∞ –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É —á–µ—Ä–µ–∑ Telegram

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –î–µ—Ç–∞–ª–∏

### –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –í–∞–ª—é—Ç
```python
# USD ‚Üí Stars
stars = int(usd_amount / 0.013)

# Stars ‚Üí USD  
usd = round(stars * 0.013, 2)

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
"$25" –¥–ª—è 25.00
"$5" –¥–ª—è 5.00
"$10.50" –¥–ª—è 10.50
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –î–∞–Ω–Ω—ã—Ö
```sql
-- –¢–∞–±–ª–∏—Ü–∞ lessons —Ç–µ–ø–µ—Ä—å —Å–æ–¥–µ—Ä–∂–∏—Ç:
CREATE TABLE lessons (
    id INTEGER PRIMARY KEY,
    title TEXT,
    price_stars INTEGER,     -- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ü–µ–Ω–∞ –¥–ª—è Telegram
    price_usd REAL,         -- –û—Ç–æ–±—Ä–∞–∂–∞–µ–º–∞—è —Ü–µ–Ω–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    is_free BOOLEAN,
    -- –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è...
);
```

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

1. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∞**: ‚úÖ
2. **–ù–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å —Å–æ–∑–¥–∞–Ω**: ‚úÖ  
3. **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã**: ‚úÖ
4. **–°–∏—Å—Ç–µ–º–∞ –æ–ø–ª–∞—Ç—ã –º–æ–¥–µ—Ä–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞**: ‚úÖ

## üí° –ë—É–¥—É—â–∏–µ –£–ª—É—á—à–µ–Ω–∏—è

1. **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –ö—É—Ä—Å**: –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –∫—É—Ä—Å–∞ Stars/USD –∏–∑ Telegram API
2. **–ú—É–ª—å—Ç–∏–≤–∞–ª—é—Ç–Ω–æ—Å—Ç—å**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ EUR, RUB –∏ –¥—Ä—É–≥–∏—Ö –≤–∞–ª—é—Ç
3. **–ê/–ë –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ –¥–æ/–ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
4. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤–ª–∏—è–Ω–∏—è –Ω–∞ –ø—Ä–æ–¥–∞–∂–∏

---

## ‚úÖ –°—Ç–∞—Ç—É—Å: –ó–ê–í–ï–†–®–ï–ù–û

–°–∏—Å—Ç–µ–º–∞ —É—Å–ø–µ—à–Ω–æ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–∞ –Ω–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ü–µ–Ω –≤ –¥–æ–ª–ª–∞—Ä–∞—Ö —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ Telegram Stars. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Ç–µ–ø–µ—Ä—å –≤–∏–¥—è—Ç –ø–æ–Ω—è—Ç–Ω—ã–µ —Ü–µ–Ω—ã, —á—Ç–æ –¥–æ–ª–∂–Ω–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∏—Ç—å –∫–æ–Ω–≤–µ—Ä—Å–∏—é –ø–æ–∫—É–ø–æ–∫.